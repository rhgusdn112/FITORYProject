<th:block th:fragment="comment-section">
  <link rel="stylesheet" type="text/css" href="/css/board/comment.css">

    <!-- 이미 리뷰를 작성한 경우 안내 메시지 출력 -->
    <div th:if="${hasReviewed}">
      <table class="review-table">
        <thead>
          <tr>
            <th>내가 쓴 리뷰</th>
            <th>작성일</th>
            <th>별점</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="review : ${reviews}" th:if="${user.memberNo == review.memberNo}">
            <td th:text="${review.reviewContent}">리뷰 내용</td>
            <td th:text="${review.reviewWriteDate}">작성일</td>
            <td th:text="${review.number} + '점'">별점: 5.0</td>
            <td>
              <button class="edit-review-btn" th:attr="data-id=${review.commentNo}">수정</button>
              <button class="delete-review-btn" th:attr="data-id=${review.commentNo}">삭제</button>
          </tr>
        </tbody>
      </table>
    </div>
  <div class="review-container">
    <h2>리뷰</h2>

    <table class="review-table">
      <thead>
        <tr>
          <th>내용</th>
          <th>닉네임</th>
          <th>작성일</th>
          <th>별점</th>
          <th>
            <div class="review-sort-options">
              <button id="sort-by-rating" th:text="'별점 순'">별점 순</button>
              <button id="sort-by-date" th:text="'작성일 순'">작성일 순</button>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="review : ${reviews}">
          <td th:text="${review.reviewContent}">리뷰 내용</td>
          <td th:text="${review.memberNickname}">작성자 이름</td>
          <td th:text="${review.reviewWriteDate}">작성일</td>
          <td th:text="${review.number} + '점'">별점: 5.0</td>
          <td>
            <button class="report-btn" data-type="review" th:attr="data-comment-no=${review.commentNo}">
              <i class="fa-solid fa-land-mine-on"></i> 리뷰 신고
            </button>
          </td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
        </tr>
      </tbody>
    </table>

    <!-- 비회원일 경우 리뷰 작성 안내 메시지 출력 -->
    <div th:if="${userType == 'guest'}">
      <p>로그인 후 리뷰를 작성할 수 있습니다.</p>
    </div>

    <!-- 리뷰 작성 폼 (결제한 회원만 작성 가능) -->
    <div class="review-form" th:if="${userType == 'paidMember' && !hasReviewed}">
      <textarea id="new-review" placeholder="리뷰를 입력하세요..."></textarea>
      <!-- 리뷰 별점 선택 옵션 -->
      <select id="review-rating">
        <option value="0.5">0.5점</option>
        <option value="1.0">1점</option>
        <option value="1.5">1.5점</option>
        <option value="2.0">2점</option>
        <option value="2.5">2.5점</option>
        <option value="3.0">3점</option>
        <option value="3.5">3.5점</option>
        <option value="4.0">4점</option>
        <option value="4.5">4.5점</option>
        <option value="5.0">5점</option>
      </select>
    </div>

    <!-- 페이지네이션 추가 -->
    <div class="pagination">
      <a href="#">&laquo;</a>
      <a href="#">1</a>
      <a href="#">2</a>
      <a href="#">3</a>
      <a href="#">4</a>
      <a href="#">5</a>
      <a href="#">&raquo;</a>
    </div>
  </div>
</th:block>
